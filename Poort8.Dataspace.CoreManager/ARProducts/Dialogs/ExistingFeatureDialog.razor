@implements IDialogContentComponent<List<(Feature Feature, bool Added)>>

<FluentStack Orientation="Orientation.Vertical">
    @if(Content.Any())
        foreach (var entry in Content)
        {
            <FluentCheckbox Value="@entry.Added" ValueChanged="@((v) => ChangeFeatureState(@entry, v))">@entry.Feature.Name</FluentCheckbox>
        }
    else
    {
        <FluentLabel>There are no other existing Features</FluentLabel>
    }
</FluentStack>

@code {
    [Parameter]
    public required List<(Feature Feature, bool Added)> Content { get; set; }

    [CascadingParameter]
    public required FluentDialog Dialog { get; set; }

    private void ChangeFeatureState((Feature Feature, bool Added) entry, bool add)
    {
        Content[Content.IndexOf(entry)] = (entry.Feature, add);
    }

    private async Task SaveClicked()
    {
        await Dialog.CloseAsync(Content);
    }

    private async Task CancelClicked()
    {
        await Dialog.CancelAsync();
    }
}
